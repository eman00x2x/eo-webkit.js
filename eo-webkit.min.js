/*!
 * eo-webkit.js 2.0.0
 * Copyright (c) 2025 Eman Olivas
 * eo-webkit.js may be freely distributed under the MIT license.
*/
!function(e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():window.eo=e()}((function(){"use strict";let e=window.document;const t=(()=>{const t=e.querySelector('meta[name="csrf_token"]')?.content;return t||(console.error('CSRF Token not found in meta tags! <meta name="csrf_token" content="{{ csrf_token() }}">'),!1)})(),r=e=>new Option(e).innerHTML,o=e=>{m.loader("Redirecting..."),window.location=e},a=e=>{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let r="";const o=new Uint8Array(e);window.crypto.getRandomValues(o);for(let a=0;a<e;a++){const e=o[a]%62;r+=t.charAt(e)}return r},n=e=>e instanceof FormData?Object.fromEntries(e.entries()):Array.isArray(e)&&e.every((e=>"object"==typeof e&&null!==e&&"name"in e&&"value"in e))?e.reduce(((e,t)=>(e[t.name]=t.value,e)),{}):"object"==typeof e&&null!==e?Object.keys(e).reduce(((t,r)=>(t[r]=e[r],t)),{}):e,i=e=>{const t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/),r=t&&11===t[7].length?t[7]:null;if(r)return{id:r,thumbnail:{default:`http://img.youtube.com/vi/${r}/default.jpg`,hq:`http://img.youtube.com/vi/${r}/hqdefault.jpg`,mq:`http://img.youtube.com/vi/${r}/mqdefault.jpg`,sd:`http://img.youtube.com/vi/${r}/sddefault.jpg`,maxres:`http://img.youtube.com/vi/${r}/maxresdefault.jpg`},url:`https://www.youtube.com/watch?v=${r}`,embed:`https://www.youtube.com/embed/${r}`};m.error("Invalid YouTube URL")},s=(t,o={},a=[])=>{if("string"!=typeof t||!t.trim())throw new Error("Invalid tag name");if("object"!=typeof o||null===o)throw new Error("Attributes must be an object");if(!Array.isArray(a))throw new Error("Children must be an array");const n=e.createElement(r(t));return Object.entries(o).forEach((([e,t])=>n.setAttribute(r(e),r(String(t))))),a.forEach((t=>{n.appendChild("string"==typeof t?e.createTextNode(r(t)):t)})),n},c=(e,t,o=null)=>{if("string"!=typeof e||!e.trim())throw new Error("Invalid name");if("string"!=typeof t)throw new Error("Invalid value");return s("input",{type:"hidden",name:r(e),value:r(t),id:o?r(o):null})},l=(e,r,{onBeforeSend:o,onSuccess:a,onError:i,onComplete:s,contentType:c="application/x-www-form-urlencoded; charset=UTF-8"}={})=>{if(!1===o?.())return;let l={"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":t},d=r;r instanceof FormData?d=r:c.includes("application/json")?(d=JSON.stringify(n(r)),l["Content-Type"]=c):(l["Content-Type"]=c,d=n(r),d=Object.keys(d).map((e=>{const t=d[e];return Array.isArray(t)?t.map((t=>`${encodeURIComponent(e+"[]")}=${encodeURIComponent(t)}`)).join("&"):`${encodeURIComponent(e)}=${encodeURIComponent(t)}`})).join("&")),fetch(e,{method:"POST",headers:l,body:d,credentials:"same-origin"}).then((async e=>e.text().then((t=>{try{return{data:JSON.parse(t),response:e}}catch{return{data:t,response:e}}})))).then((({data:e,response:t})=>{if(t.ok){if("string"==typeof e&&(e.includes("Fatal error")||e.includes("ErrorException")))throw new Error("Server encountered a fatal error: "+e);a?.(e)}else{const r=t.status,o=e?.message||`Request failed with status ${r}`,a=e?.errors||e;i?.(o,a,r)}})).catch((e=>{})).finally(s)},d=async(e,t,r,o,a={})=>{if("function"==typeof t&&([r,o,a,t]=[t,r,a,void 0]),t&&"object"==typeof t&&Object.keys(t).length>0){const r=new URLSearchParams(t).toString();r&&(e+=(e.includes("?")?"&":"?")+r)}const n={Accept:"json"===o?"application/json":"blob"===o?"image/png":"text/html","X-Requested-With":"XMLHttpRequest"};try{const t=await fetch(e,{method:"GET",headers:{...n,...a.headers||{}}}),i=t.headers.get("Content-Type")||"",s="json"===o||i.includes("application/json"),c="blob"===o||i.includes("image/")||i.includes("application/octet-stream");let l;if(204===t.status)l=null;else if(c)l=await t.blob();else if(s){const e=await t.text();l=e?JSON.parse(e):null}else l=await t.text();return t.ok?(r?.(l,t),{success:!0,status:t.status,data:l}):(r?.(l,t),{success:!1,status:t.status,data:l})}catch(e){return console.error("Fetch Error:",e),{success:!1,status:0,data:null,error:e}}},p=(()=>{const e=JSON.parse(localStorage.getItem("EOclient"))||{userAgent:navigator.userAgent,geo:null,browser:null};return localStorage.getItem("EOclient")||((async()=>{try{const t=await d("https://ipinfo.io/json");e.geo=t.data,localStorage.setItem("EOclient",JSON.stringify(e))}catch(e){console.error("Error getting geo info:",e)}})(),e.browser=Object.entries({"Opera|Opr":"Opera",Edg:"Microsoft Edge",EdgA:"Microsoft Edge (Chromium)","MSIE|Trident":"Microsoft IE",Chrome:"Google Chrome",Safari:"Apple Safari",Firefox:"Mozilla Firefox"}).find((([e])=>new RegExp(e).test(navigator.userAgent)))?.[1]||"Unknown Browser"),e})(),u=(()=>{const t=(e,t,r)=>{t.classList.add("d-none"),r.classList.remove("d-none"),e.disabled=!1},r=(e,r,o,a)=>{e.classList.add("is-invalid"),t(e,r,o),m.error(a)};return{init:({onBeforeSend:o,onSuccess:a,onRemove:n,onPlayback:l}={})=>{var d;(()=>{const t=e.getElementById("videoInput");t&&t.appendChild(s("div",{class:"d-flex gap-1"},[s("div",{class:"form-floating flex-fill"},[s("input",{type:"text",id:"youtubeUrl",class:"form-control youtubeUrl",placeholder:"","aria-label":"YouTube URL","aria-describedby":"basic-addon1"}),s("label",{for:"youtubeUrl"},[s("i",{class:"ti ti-brand-youtube"}),e.createTextNode(" Paste YouTube URL")])]),s("span",{class:"btn btn-primary btn-add-video"},[s("span",{class:"spinner-border spinner-border-sm d-none",role:"status","aria-hidden":"true"}),s("span",{class:"btn-text fs-18"},[s("i",{class:"ti ti-plus me-1"}),e.createTextNode(" Add Video")])])]))})(),((o,a)=>{e.addEventListener("click",(n=>{const l=n.target.closest(".btn-add-video");if(!l)return;const d=e.querySelector(".youtubeUrl");if(!d)return;const p=l.querySelector(".spinner-border"),u=l.querySelector(".btn-text"),m=d.value.trim();if(p.classList.remove("d-none"),u.classList.add("d-none"),d.disabled=!0,!m)return r(d,p,u,"YouTube URL is required!");const g=i(m);(async()=>{if("function"==typeof o){const e=await o(g);if(e instanceof Promise)return e.then((e=>!1!==e||(t(d,p,u),!1)));if(!1===e)return t(d,p,u),!1}return!0})().then((o=>{if(!o)return;if(!g||!g.id)return r(d,p,u,g?.message||"Invalid YouTube URL!");if(e.querySelector(`.${CSS.escape(g.id)}`))return r(d,p,u,"Video already added!");const n=s("div",{class:g.id,"data-id":g.id},[c(`videos[${g.id}][id]`,g.id),c(`videos[${g.id}][url]`,g.url),c(`videos[${g.id}][embed]`,g.embed),...Object.entries(g.thumbnail||{}).map((([e,t])=>c(`videos[${g.id}][thumbnail][${e}]`,t))),c(`videos[${g.id}][created_at]`,Date.now().toString()),s("div",{class:"position-relative p-2 cursor-pointer text-white",style:`width: 15rem; height: 9.5rem; background-size: cover; background-position: center; background-image: url(${g.thumbnail?.sd||""});`},[s("div",{class:"position-absolute top-0 end-0 btn-delete-container p-2"},[s("span",{class:"btn btn-danger btn-sm btn-remove-video","data-id":g.id},[e.createTextNode("X")])]),s("div",{class:"btn-playback position-absolute top-50 start-50 translate-middle text-center","data-id":g.id,"data-url":g.url,"data-embed":g.embed},[s("i",{class:"ti ti-brand-youtube fs-48"})])])]);e.querySelector(".video-list-container")?.prepend(n),d.value="",d.classList.remove("is-invalid"),a?.(g),t(d,p,u)}))}))})(o,a),d=l,e.addEventListener("click",(t=>{const r=t.target.closest(".btn-playback");r&&(y.create({id:r.dataset.id,size:"fullscreen",callback:()=>s("div",{class:"row justify-content-center"},[s("div",{class:"col-xl-8 col-lg-8 col-md-8 col-sm-12 col-12"},[s("iframe",{class:"w-100",height:"560",src:r.dataset.embed,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture;",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""}),s("div",{class:"text-center"},[s("span",{class:"btn mt-3","data-bs-dismiss":"modal"},[s("i",{class:"ti ti-x me-1"}),e.createTextNode(" Close")])])])]),status:"info",destroyable:!0}),e.getElementById(r.dataset.id).querySelector(".modal-content").style.backgroundColor="rgba(0, 0, 0, 1)",d?.({id:r.dataset.id,url:r.dataset.url,embed:r.dataset.embed}))})),(t=>{e.addEventListener("click",(r=>{const o=r.target.closest(".btn-remove-video");o&&e.querySelector(`.${CSS.escape(o.dataset.id)}`)?.remove(),o&&t?.(o.dataset.id)}))})(n)}}})(),m=function(){const t=(t,r)=>{e.querySelector(r)||e.body.prepend(s("div",{class:"response"})),e.querySelector(r).innerHTML=t},r=(r,o="success",a=".response")=>{const n={success:s("i",{class:"ti ti-check"}),info:s("i",{class:"ti ti-info-circle"}),warning:s("i",{class:"ti ti-alert-triangle"}),danger:s("i",{class:"ti ti-x"})},i=s("div",{class:`message alert alert-${o} alert-dismissible show`,role:"alert"},[s("div",{class:"alert-icon float-start w-1",style:"margin-top: 1px"},[n[o]]),s("span",{class:`alert-description text-${o}`},[e.createTextNode(r)]),s("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})]);t(i.outerHTML,a)};return{success:(e,t=".response")=>r(e,"success",t),error:(e,t=".response")=>r(e,"danger",t),loader:(r="Processing, Please wait...",o=".response")=>{const a=s("div",{class:"bg-white p-3 mt-3 rounded border"},[s("div",{class:"d-flex gap-3 align-items-center"},[s("div",{class:"loader"}),s("p",{class:"mb-0"},[e.createTextNode(r)])])]);t(a.outerHTML,o)},message:(e,t,o=".response")=>{r(e,t,o)},destroy:t=>{e.querySelector(t).innerHTML=""}}}(),g=(()=>{const t=(t,r)=>{e.querySelectorAll(t).forEach((e=>{Object.assign(e.style,{cursor:r?"wait":"",pointerEvents:r?"none":"",opacity:r?.5:""}),e.disabled=r}))};return{disable:(e=".btn")=>t(e,!0),enable:(e=".btn")=>t(e,!1)}})(),y=(()=>{const t=({id:t,size:o,callback:a,status:n=!1,destroyable:i=!0,centered:c=!1}={})=>{const l=s("div",{class:"modal "+(i?"modal-destroyable":""),id:t,"aria-labelledby":"modal","aria-hidden":"true"},[s("div",{class:`modal-dialog modal-${o} ${c?"modal-dialog-centered":""}`},[s("div",{class:"modal-content"},[...n?[s("div",{class:`modal-status bg-${n}`})]:[],s("div",{class:"modal-body"},[s("span",{class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"}),s("div",{class:"response-modal"},[...r(a)])])])])]);e.body.appendChild(l),new bootstrap.Modal(l,{keyboard:!1}).show()},r=t=>{if(!t)return[];const r=t();if("string"==typeof r){const t=e.createElement("div");return t.innerHTML=r,[...t.childNodes]}return r instanceof Element?[r]:[]},o=(()=>{const r=(e,r="info")=>{t({id:"modalAlertMessage",size:"sm",status:r,centered:!0,callback:()=>e.outerHTML})};return{loader:(e="Processing, Please wait...")=>{r(s("div",{class:"p-3 mt-3 "},[s("div",{class:"d-flex gap-3 align-items-center"},[s("div",{class:"loader"}),s("p",{class:"mb-0"},[e])])]),"info")},success:e=>{r(s("div",{class:"text-center py-2"},[s("i",{class:"ti ti-circle-check text-success",style:"font-size: 80px"},[]),s("h3",{class:"mt-2 mb-0"},[]),s("div",{class:"message-container text-start"},[e])]),"success")},error:t=>{r(s("div",{class:"text-center py-2"},[s("i",{class:"ti ti-alert-triangle text-danger",style:"font-size: 50px"},[]),s("h3",{class:"mt-2 mb-2"},[e.createTextNode("Correct the following error(s):")]),s("div",{class:"message-container text-start"},[t])]),"danger")},close:()=>{const t=e.getElementById("modalAlertMessage"),r=bootstrap.Modal.getInstance(t);r?.hide()},message:t=>{r(s("div",{class:"text-center py-2"},[s("i",{class:"ti ti-alert-square-rounded text-info",style:"font-size: 50px"},[]),s("h3",{class:"mt-2 mb-0"},[e.createTextNode("Information")]),s("div",{class:"message-container text-start"},[t])]),"info")}}})();return{_initBeforeLoad:()=>{e.addEventListener("hidden.bs.modal",(t=>{const r=e.getElementById(t.target.id);r?.classList.contains("modal-destroyable")&&r.remove()})),e.addEventListener("click",(e=>{const t=e.target.closest(".modal");e.target.classList.contains("btn-close")&&t&&bootstrap.Modal.getInstance(t)?.hide()}))},create:t,alert:o}})(),f=function(){let r="image";const o={image:"https://static.vecteezy.com/system/resources/previews/020/213/738/non_2x/add-profile-picture-icon-upload-photo-of-social-media-user-vector.jpg",document:"https://cdn-icons-png.flaticon.com/512/4208/4208479.png",docPreview:"https://cdn-icons-png.flaticon.com/512/4208/4208479.png"},n=(t,a,n,i,c,l)=>{const d=e.querySelector(t)||e.body.prepend(s("div",{class:"upload-container"}));l&&(d.innerHTML=`<span class="btn btn-dark btn-eo-uploader-browse_${i}"><i class="ti ti-upload me-2"></i> Upload</span>`),e.body.prepend(s("form",{id:`uploadForm_${i}`,class:"d-none",enctype:"multipart/form-data"},[s("input",{type:"file",id:i,accept:c,name:l?`${n}[]`:n,...l?{multiple:!0}:{}})]));const p=s("div",l?{class:"multiple-preview d-flex flex-wrap gap-2"}:{id:"photo-preview",class:`photo-preview position-relative btn-eo-uploader-browse_${i}`,style:`width: 13rem; height: 13rem; background-image: url(${o[r]});`});e.querySelector(a).prepend(p)},i=(t,a)=>{const n="image"===r?URL.createObjectURL(a):o.docPreview,i=a.name.split(".")[1].toLowerCase();return t?s("div",{class:`file-container position-relative rounded border ${a.id}`,id:a.id,style:`width: 13rem; height: 13rem; background-size: cover; background-position: center; background-image: url(${n}); opacity: 0.5; transition: opacity 0.3s ease-in-out;`},[s("span",{class:"btn btn-danger btn-sm remove-btn position-absolute top-0 end-0 m-2","data-id":a.id,"data-name":`${CSS.escape(a.id)}.${CSS.escape(i)}`,"data-container":`.${a.id}`},["X"]),"document"===r?s("span",{class:"text-white position-absolute bottom-0 overflow-auto w-100 px-2 py-1 bg-dark text-nowrap small"},[a.name.toString()]):"",s("div",{class:"spinner-container d-flex justify-content-center align-items-center w-100 h-100"},[s("div",{class:"spinner-border text-white",style:"width:50px; height:50px; --tblr-spinner-border-width: 5px !important;"})])]):e.querySelector(".photo-preview").style.backgroundImage=`url(${n})`},d=(o,a,n,i,d,p,u,m)=>new Promise((g=>{const y=e.querySelector(d?`.${CSS.escape(o.id)}`:".photo-preview"),f=new FormData;f.append(d?`${i}[]`:i,o),t&&f.append("csrf_token",t),l(n,f,{contentType:null,beforeSend:()=>!1!==p?.()&&null,onSuccess:t=>{y.style.opacity="1",e.querySelector(`#${CSS.escape(o.id)} .spinner-container`)?.remove(),u?.(t,o,y),((t,o,a,n,i)=>{const s=t?o:a,l="document"===r?"documents":"images";s.appendChild(c(`${l}[${n}][size]`,i.size.toString()));const d=i.name.split(".")[1].toLowerCase();if(t){const t=e.querySelector(`.${s.id} .remove-btn`);t&&(t.dataset.id=i.id),t.dataset.name=`${i.id}.${d}`}s.id=i.id,Object.entries(i).forEach((([e,t])=>{s.appendChild(c(`${l}[${n}][${e}]`,t?.toString()||""))})),t&&a.appendChild(s)})(d,y,a,o.id,o),g()},onError:t=>{m?.(t,y),Object.assign(y.style,{opacity:"1",backgroundImage:""}),e.querySelector(`#${CSS.escape(o.id)} .spinner-container`)?.remove(),y.appendChild(s("div",{},[s("p",{class:"p-2 text-danger"},[t.toString()])])),g()}})})),p=(t,o,n,s,c,l,p,u,m,y,f,b=!1,w={})=>{e.addEventListener("click",(t=>{t.target.closest(`.btn-eo-uploader-browse_${c}`)&&e.getElementById(c).click()})),e.addEventListener("change",(async f=>{if(!f.target.matches(`#${c}`))return;const v=e.querySelector(n?`${t} .multiple-preview`:`${t} .photo-preview`);if(!v)return console.error(`Element '${t}' not found.`);g.disable(),r=o;let S=[...f.target.files];const x=await Promise.all(S.map((async e=>{if(e.id="_"+a(11),b&&"image"===o)try{const t=await h(e,w);return t.id=e.id,t}catch(t){return console.warn("Compression failed:",t),e}return e})));x.forEach((e=>{!y&&(n?v.prepend(i(n,e)):i(n,e))})),(async(e,t,r,o,a,n,i,s)=>{for(let c of e)await d(c,t,r,o,a,n,i,s)})(x,v,l,s,n,p,u,m).then((()=>g.enable())),f.target.value=""})),e.addEventListener("click",(r=>{const o=r.target.closest(`${t} .remove-btn`);if(!o)return;const a=o.getAttribute("data-id"),n=e.getElementById(a);f?.(o),n&&n.remove()}))};return{create:(t=".upload-container",i,s={})=>{let{inputName:c="eoFileUpload",previewSelector:l=".uploaded-photo",disablePreview:d=!1,uploadType:u="image",accept:m=("document"===u?"application/pdf":"image/*"),multiple:g=!0,onBeforeSend:y,onSuccess:f,onError:h,onFileRemove:b,compressFile:w=!1,compression:v={}}=s;if(!["image","document"].includes(u))throw new Error("Invalid upload type.");r=u;const S="_"+a(11),x="eoFileUpload"===c?`${c}_${S}`:c;g||(l=".uploaded-photo"==l?t:l,o.image=e.querySelector(l).getAttribute("data-image")||o.image),n(t,l,x,S,m,g),p(l,u,g,x,S,i,y,f,h,d,b,w,v)},setDefaultIcon:(e,t)=>{e in o&&(o[e]=t)}}}(),h=async(t,r={})=>{if(!(t instanceof File&&t.type.startsWith("image/")))throw new Error("Invalid image file");const{maxWidth:o=1024,maxHeight:a=1024,quality:n=.7,type:i="image/jpeg"}=r,s=await new Promise(((e,r)=>{const o=new Image;o.onload=()=>e(o),o.onerror=r,o.src=URL.createObjectURL(t)})),c=e.createElement("canvas"),l=Math.min(o/s.width,a/s.height,1);c.width=s.width*l,c.height=s.height*l;return c.getContext("2d").drawImage(s,0,0,c.width,c.height),new Promise((e=>{c.toBlob((r=>{e(new File([r],t.name,{type:i}))}),i,n)}))},b={init:(t,r={})=>{if(!e.querySelector(t))return;if("object"!=typeof tinymce)throw new Error("TinyMCE script is not inlcuded in head.");const o={selector:"textarea"+t,height:500,menubar:!1,plugins:["advlist lists link anchor","media table paste code"],toolbar:"",content_css:["https://fonts.googleapis.com/css?family=Lato:300,300i,400,400i"],...r};tinymce.remove(),tinymce.init(o)}},w=(()=>{const t=(t,r)=>s("div",{},[...t.customProperties?[s("span",{class:"dropdown-item-indicator"},[e.createTextNode(t.customProperties)])]:[],e.createTextNode(r(t.text))]);return{init:(r,o={})=>{if(!window.TomSelect)throw new Error("TomSelect script is not included in head.");const a=e.querySelector(r);if(!a)return;const n={...{copyClassesToDropdown:!1,dropdownParent:"body",controlInput:"<input>",render:{item:t,option:t}},...o};new TomSelect(a,n)}}})(),v=(()=>{const t=({containerId:t,data:r,options:o={},packageType:a,chartTypeLoader:n,apiKey:i})=>{const s=e.getElementById(t);return!!s&&(google.charts.load("current",{packages:[a],mapsApiKey:i}),google.charts.setOnLoadCallback((()=>{if(!r)throw new Error("Set the data in table property");const e=r(new google.visualization.DataTable),t=n();if(!t)throw new Error("Invalid chart type.");const a={hAxis:{format:"MM d"},tooltip:{trigger:"focus"},focusTarget:"datum",crosshair:{trigger:"both",orientation:"vertical"}},i="function"==typeof t.convertOptions?t.convertOptions({...a,...o}):{...a,...o};new t(s).draw(e,i)})),!0)};return new Proxy({material:{line:e=>t({...e,packageType:"line",chartTypeLoader:()=>google.charts.Line}),bar:e=>t({...e,packageType:"bar",chartTypeLoader:()=>google.charts.Bar})},classic:{combo:e=>t({...e,packageType:"corechart",chartTypeLoader:()=>google.visualization.ComboChart}),bar:e=>t({...e,packageType:"corechart",chartTypeLoader:()=>google.visualization.BarChart}),calendar:e=>t({...e,packageType:"calendar",chartTypeLoader:()=>google.visualization.Calendar}),geo:e=>{if("markers"===e.options?.displayMode&&!e.apiKey)throw new Error("Markers require geocoding, you'll need an ApiKey. See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings");return t({...e,packageType:"corechart",chartTypeLoader:()=>google.visualization.GeoChart})},pie:e=>t({...e,packageType:"corechart",chartTypeLoader:()=>google.visualization.PieChart}),line:e=>t({...e,packageType:"corechart",chartTypeLoader:()=>google.visualization.LineChart}),map:e=>{if(!e.apiKey)throw new Error("Maps require a mapsApiKey. See: https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings");return t({...e,packageType:"map",chartTypeLoader:()=>google.visualization.Map})},trendLine:e=>t({...e,packageType:"corechart",chartTypeLoader:()=>google.visualization.ScatterChart,options:{trendlines:{0:{}},...e.options}})}},{get(e,t){if(t in e)return e[t];const r={line:"classic",pie:"classic",bar:"material",combo:"classic",calendar:"classic",geo:"classic",map:"classic",trendLine:"classic"}[t];if(r&&e[r]&&"function"==typeof e[r][t])return console.warn(`[googleChart] Deprecated access: use googleChart.${r}.${t} instead.`),e[r][t];console.warn(`[googleChart] Unknown chart type: ${t}`)}})})(),S=(()=>{const t=()=>{const t=e.querySelector(".mortgage-calculator-form #result");if(!t)return;const{monthlyPayment:r,formattedMonthlyPayment:o}=a();t.setAttribute("monthlyPayment",r),t.innerHTML=`&#8369;${o}`},r=(t,r,o)=>{const a="mortgageYear"===t?" years":" %";return s("select",{id:t,class:"form-select"},r.map((t=>s("option",{value:t,...t===o?{selected:!0}:{}},[e.createTextNode(`${t}${a}`)]))))},o=({loanAmount:e,interestRate:t,paymentsPerYear:r,years:o,monthlyPayment:a})=>{const n=[];let i=e;const s=r*o;for(let e=0;e<=s;e++){const o=i*(t/100/r),s=a-o;n.push([e,Math.max(0,s),Math.max(0,o),Math.max(0,i)]),i-=s}return n},a=()=>{const t=t=>e.querySelector(t)?.value,r=parseInt(t("#sellingPrice"),10),a=r-r*(parseInt(t("#mortgageDownpayment option:checked"),10)/100),n=parseFloat(t("#mortgageInterest option:checked")),i=parseInt(t("#mortgageYear option:checked"),10),s=(({rate:e,nper:t,presentValue:r})=>{const o=Math.pow(1+e,t);return e/(o-1)*(-r*o)})({rate:n/100/12,nper:12*(i+1),presentValue:-a});return{monthlyPayment:s,formattedMonthlyPayment:parseFloat(s.toFixed(2)).toLocaleString(),schedule:o({loanAmount:a,interestRate:n,paymentsPerYear:12,years:i,monthlyPayment:s})}};return{_initBeforeLoad:()=>{e.addEventListener("change",(e=>{["#mortgageDownpayment","#mortgageInterest","#mortgageYear"].some((t=>e.target.matches(`.mortgage-calculator-form ${t}`)))&&t()}))},init:()=>{(()=>{const t=e.querySelector(".mortgage-calculator-form #dpSelection");if(t){const e=r("mortgageDownpayment",[10,20,30,40,50,60,70,80,90],20);t.insertAdjacentElement("afterend",e),t.remove()}})(),(()=>{const t=e.querySelector(".mortgage-calculator-form #interestSelection");if(t){const e=Array.from({length:81},((e,t)=>(.25*t).toFixed(2))),o=r("mortgageInterest",e,"3.75");t.insertAdjacentElement("afterend",o),t.remove()}})(),(()=>{const t=e.querySelector(".mortgage-calculator-form #yearSelection");if(t){const e=Array.from({length:30},((e,t)=>t+1)),o=r("mortgageYear",e,3);t.insertAdjacentElement("afterend",o),t.remove()}})(),t()}}})(),x=function(){let t={},r=[];const o=(e,t)=>t.split(".").reduce(((e,t)=>e?.[t]),e),a=e=>e.replace(/\.(\w+)/g,"[$1]"),n=e=>e.split(".").pop(),i=e=>e.split(".").pop().replace(/_/g," ").replace(/\b\w/g,(e=>e.toUpperCase())),c=(t,r)=>{const o=e.getElementById(t);if(!o)return;const a=o.parentNode.querySelector(".invalid-feedback");a&&a.remove();const n=s("div",{class:"invalid-feedback",role:"alert","aria-live":"polite"},[r]);o.parentNode.insertBefore(n,o.nextSibling)},l=e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),d={required:()=>"is required.",length:({min:e,max:t})=>`must be ${e?`at least ${e} `:""} ${t?`and at most ${t} `:""} characters.`,number:({min:e,max:t})=>`must be a number${e?` greater than ${e}`:""}${t?` and less than ${t}`:""}.`,url:()=>"is not a valid URL.",email:()=>"is not a valid email address.",date:()=>"is not a valid date.",datetime:()=>"is not a valid datetime.",equality:e=>`must be equal to ${e}.`,type:e=>`must be of type ${e}.`},p={required:(e,t)=>t&&null!=e&&""!==e,length:(e,{min:t,max:r=120})=>"string"==typeof e&&e.length>=t&&e.length<=r,number:(e,{min:t,max:r=9999})=>{if(isNaN(e))return!1;const o=parseFloat(e);return(void 0===t||o>t)&&(void 0===r||o<r)},url:(e,t)=>t.format?.pattern?t.format.pattern.test(e):"string"==typeof e&&/^https?:\/\/[^\s/$.?#].[^\s]*$/.test(e),email:(e,t)=>t.format?.pattern?t.format.pattern.test(e):"string"==typeof e&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),date:(e,t)=>t.format?.pattern?t.format.pattern.test(e):!isNaN(Date.parse(e)),datetime:(e,t)=>t.format?.pattern?t.format.pattern.test(e):!isNaN(new Date(e).getTime()),equality:(e,t)=>e===t,type:(e,t)=>typeof e===t};return{validate:async(s,u=t,m=!1)=>{if("object"!=typeof u)throw new Error("rules must be an object.");if("object"!=typeof s||s instanceof FormData)throw new Error("data must be an object. Use eo.serializeFormData(data) instead.");r=[];for(const[t,g]of Object.entries(u)){const u=a(t),y=o(s,u);for(const[o,a]of Object.entries(g)){const s=p[o];if(!s)continue;const u="object"==typeof a&&void 0!==a.required?a.required:a,g=a?.format?.message,f=e.getElementById(n(t));f&&f.classList.remove("is-invalid");if(!(m?await s(y,u):s(y,u))){f&&f.classList.add("is-invalid");const e=g||`${i(t)} ${d[o](u)}`;c(n(t),e),r.push(l(e))}}}return 0===r.length},getErrors:()=>r,setConstraints:e=>t=e,resetConstraints:()=>t={},registerRule:(e,t)=>{if("string"!=typeof e||"function"!=typeof t)throw new Error("Invalid rule registration: name must be a string and fn must be a function.");p[e]=t},unregisterRule:e=>{p[e]&&delete p[e]}}}(),E=(e,t="")=>Object.keys(e).reduce(((r,o)=>{const a=t?`${t}.${o}`:o;return"object"==typeof e[o]&&null!==e[o]?Object.assign(r,E(e[o],a)):r[a]=e[o],r}),{}),T=function(){let t=[];function r(){if(t.length>1){t.pop();const o=t[t.length-1];localStorage.setItem("history",JSON.stringify(t)),function(t){if(!t)return;t.scrollPosition&&(window.scrollTo(t.scrollPosition.x,t.scrollPosition.y),console.log(t.scrollPosition));if(t.elementVisibility)for(const r in t.elementVisibility){e.querySelectorAll(r).forEach((e=>{e.style.display=t.elementVisibility[r]||""}))}if(t.elementContent)for(const r in t.elementContent){e.querySelectorAll(r).forEach((e=>{e.textContent=t.elementContent[r]}))}if(t.elementClasses)for(const r in t.elementClasses){e.querySelectorAll(r).forEach((e=>{e.className=t.elementClasses[r]}))}}(o),(r=o.hash)&&(window.location.hash=r)}var r}return window.addEventListener("popstate",(()=>{r()})),{pushState:function(e){t.push(e),localStorage.setItem("history",JSON.stringify(t))},replaceState:function(e){t[t.length-1]=e,localStorage.setItem("history",JSON.stringify(t))},goBack:r,load:function(){const e=localStorage.getItem("history");e&&(t=JSON.parse(e))}}}(),$=(()=>{let e;return{create:(t,r,o)=>{e=new WebSocket(t),e.onmessage=e=>r(JSON.parse(e.data)),e.onerror=o||(e=>console.error("Listener error:",e))},send:t=>e?.send(JSON.stringify(t)),close:()=>e?.close()}})();return{initBeforeLoad:function(){S._initBeforeLoad(),y._initBeforeLoad()},initAfterLoad:()=>{let e;window.addEventListener("resize",(()=>{clearTimeout(e),e=setTimeout((()=>{window.dispatchEvent(new Event("resizeEnd"))}),500)}))},getVersion:()=>"v2.0.0",userClient:p,CSRFToken:t,moveHtmlElement:(t,o)=>{const a=e.querySelector(r(t)),n=e.querySelector(r(o));a&&n?(n.innerHTML=a.innerHTML,a.innerHTML=""):console.error("Element not found")},createElements:s,epochToTimeString:e=>new Date(e>1e10?e:1e3*e).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),trim:(e,t)=>e.length>t?`${e.slice(0,t-3)}...`:e,formatFileSize:(e,t=0)=>{if(0===e)return"0 Bytes";const r=Math.floor(Math.log2(e)/Math.log2(1e3));return`${(e/Math.pow(1e3,r)).toFixed(t)}${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}`},uuidv4:()=>"00000000-0000-4000-8000-000000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))),getRandomChar:a,getRandomNum:(e,t)=>{if(e>t)throw new Error("Start must be â‰¤ End");return e+Math.floor(Math.random()*(t-e+1))},formatCurrency:e=>{const t=Math.abs(Number(e)),r=["","K","M","B","T","Qd","Qn","Sx","Sp","Oc","Nn","Dc","Ud","Dd","Td","Qdd","Qnd","Sxd","Spd","Od","Nd","V"],o=[1,1e3,1e6,1e9,1e12,1e15,1e18,1e21,1e24,1e27,1e30,1e33,1e36,1e39,1e42,1e45,1e48,1e51,1e54,1e57,1e60,1e63,1e100];for(let e=o.length-1;e>=0;e--)if(t>=o[e])return(t/o[e]).toFixed(t%o[e]==0?0:2)+r[e];return t.toString()},serializeFormData:n,getYoutubeVideoData:i,post:l,get:d,redirect:o,objectToDotNotation:E,dotNotationToObject:e=>{let t={};return Object.keys(e).forEach((r=>{r.split(".").reduce(((t,o,a,n)=>t[o]||(t[o]=n.length-1===a?e[r]:{})),t)})),t},diffDays:(e,t)=>Math.ceil(Math.abs(e-t)/864e5),removeFalseArray:e=>e.filter((e=>""!==e&&null!==e&&!1!==e&&void 0!==e&&"boolean"!=typeof e)),removeDuplicatesArray:e=>[...new Set(e)],getCookie:t=>e.cookie.split(";").map((e=>e.trim())).find((e=>e.startsWith(t+"=")))?.split("=")[1]||"",setCookie:(t,r,o)=>{const a=new Date(Date.now()+864e5*o).toUTCString();e.cookie=`${t}=${r}; expires=${a}; path=/`},readableDate:e=>{const t="number"==typeof e?new Date(e<1e10?1e3*e:e):"string"==typeof e||e instanceof Date?new Date(e):(()=>{throw new Error("Invalid timestamp type. Expected number, string, or Date object.")})(),r=new Date,[o,a,n]=[t.toDateString()===r.toDateString(),t.toDateString()===new Date(r.setDate(r.getDate()-1)).toDateString(),t.getFullYear()===r.getFullYear()];return o?t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):a?"Yesterday at "+t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):n?t.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):t.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"})},validator:x,video:u,modal:y,alert:m,button:g,tinyMCE:b,googleChart:v,tomSelect:w,history:T,compressImage:h,toast:(t,r={})=>{const{type:o="info",duration:a=3e3,class:n=""}=r,i=s("div",{class:`toast align-items-center ${{success:"bg-success text-white",error:"bg-danger text-white",warning:"bg-warning text-dark",info:"bg-primary text-white"}[o]||"bg-secondary text-white"} ${n}`,role:"alert","aria-live":"assertive","aria-atomic":"true"},[s("div",{class:"d-flex"},[s("div",{class:"toast-body"},[t]),s("button",{type:"button",class:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"},[])])]);let c=e.querySelector(".toast-container");c||(c=s("div",{class:"toast-container position-fixed bottom-0 end-0 p-3",style:"z-index: 1080"},[]),e.body.appendChild(c)),c.appendChild(i);new bootstrap.Toast(i,{delay:a}).show(),setTimeout((()=>{i.remove(),0===c.children.length&&c.remove()}),a+200)},listener:$,submitForm:(r,{rules:a,callback:i,onBeforeSend:c,redirectUrl:d,onError:p,onComplete:u,redirectTimeout:f=3e3,alertContainerType:h="modal"}={})=>{r=r.replace("#","");const b=e.getElementById(r);if(!b)return void console.error(`Form with ID '${r}' not found!`);e.addEventListener("submit",(e=>{e.target.id===r&&e.preventDefault()}));const w=new FormData(b);t&&w.append("csrf_token",t),c?.(w);const v="alert"===h;return l(b.getAttribute("action"),w,{onBeforeSend:()=>{if(v?m.loader():y.alert.loader(),g.disable(),"object"==typeof a){if(!x.validate(n(w),a))return y.alert.close(),v?m.error(x.getErrors().join(", ")):(()=>{y.alert.error("");const t=e.querySelector(".response-modal .message-container");if(!t)return;const r=s("ul",{class:""},x.getErrors().map((e=>s("li",{},[e])))),o=s("div",{class:"error-container"},[r]);t.appendChild(o)})(),g.enable(),!1}},onSuccess:e=>{try{const t="object"==typeof e?e:JSON.parse(e);v?m.message(t.message):y.alert.message(t.message),i?.(n(w),t)}catch(t){m.destroy(".response"),i?.(n(w),e,t)}(d||e&&e.redirect)&&setTimeout((()=>o(d??e.redirect)),f)},onError:(e,t)=>{t&&t.redirect&&setTimeout((()=>o(t.redirect)),f),v?m.error(e):y.alert.error(e),p?.(e,t)},onComplete:()=>{y.alert.close(),g.enable(),u?.()}})},uploader:f,mortgageCalculator:S}})),document.addEventListener("DOMContentLoaded",(function(){window.eo.initBeforeLoad()})),window.addEventListener("load",(function(){window.eo.initAfterLoad()}));